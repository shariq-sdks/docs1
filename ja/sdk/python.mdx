---
title: "Python SDK"
description: "Authlete Python SDK の使用方法"
---

# Python SDK

Authlete Python SDKを使用して、PythonアプリケーションでAuthlete APIと簡単に統合できます。

## インストール

```bash
pip install authlete-python
```

## 基本的な使用方法

### 1. クライアントの初期化

```python
from authlete.api import AuthleteApi

# クライアントの初期化
api = AuthleteApi(
    base_url='https://us.authlete.com',
    service_api_key='YOUR_SERVICE_API_KEY',
    service_api_secret='YOUR_SERVICE_API_SECRET'
)
```

### 2. サービス情報の取得

```python
def get_service():
    try:
        service = api.get_service()
        print(f"サービス情報: {service}")
    except Exception as e:
        print(f"エラー: {e}")
```

### 3. クライアントの作成

```python
def create_client():
    try:
        client_data = {
            'clientName': 'My Test Client',
            'clientType': 'PUBLIC',
            'redirectUris': ['https://example.com/callback']
        }
        
        client = api.create_client(client_data)
        print(f"クライアントID: {client['clientId']}")
    except Exception as e:
        print(f"エラー: {e}")
```

## 認可フローの実装

### 認可リクエストの処理

```python
def handle_authorization_request(request):
    try:
        auth_request = {
            'parameters': request.query_string.decode('utf-8')
        }
        
        response = api.authorization(auth_request)
        
        if response['action'] == 'INTERACTION':
            # ユーザー認証と同意画面を表示
            show_user_consent(response)
        
        return response
    except Exception as e:
        print(f"認可リクエストエラー: {e}")
```

### トークンリクエストの処理

```python
def handle_token_request(request):
    try:
        token_request = {
            'parameters': request.form.to_dict()
        }
        
        response = api.token(token_request)
        
        if response['action'] == 'OK':
            return response['responseContent']
        
        return response
    except Exception as e:
        print(f"トークンリクエストエラー: {e}")
```

## Flask統合

### 基本的なFlaskアプリケーション

```python
from flask import Flask, request, jsonify
from authlete.api import AuthleteApi

app = Flask(__name__)

# Authlete APIクライアントの初期化
api = AuthleteApi(
    base_url='https://us.authlete.com',
    service_api_key='YOUR_SERVICE_API_KEY',
    service_api_secret='YOUR_SERVICE_API_SECRET'
)

@app.route('/oauth/authorize', methods=['GET'])
def authorize():
    try:
        auth_request = {
            'parameters': request.query_string.decode('utf-8')
        }
        
        response = api.authorization(auth_request)
        return jsonify(response)
    except Exception as e:
        return jsonify({'error': str(e)}), 500

@app.route('/oauth/token', methods=['POST'])
def token():
    try:
        token_request = {
            'parameters': request.form.to_dict()
        }
        
        response = api.token(token_request)
        return jsonify(response)
    except Exception as e:
        return jsonify({'error': str(e)}), 500

if __name__ == '__main__':
    app.run(debug=True)
```

## Django統合

### 設定

```python
# settings.py
AUTHLETE_CONFIG = {
    'BASE_URL': 'https://us.authlete.com',
    'SERVICE_API_KEY': 'YOUR_SERVICE_API_KEY',
    'SERVICE_API_SECRET': 'YOUR_SERVICE_API_SECRET'
}
```

### ビュー

```python
# views.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from authlete.api import AuthleteApi
from django.conf import settings

api = AuthleteApi(**settings.AUTHLETE_CONFIG)

def authorize(request):
    try:
        auth_request = {
            'parameters': request.GET.urlencode()
        }
        
        response = api.authorization(auth_request)
        return JsonResponse(response)
    except Exception as e:
        return JsonResponse({'error': str(e)}, status=500)

@csrf_exempt
def token(request):
    try:
        token_request = {
            'parameters': dict(request.POST)
        }
        
        response = api.token(token_request)
        return JsonResponse(response)
    except Exception as e:
        return JsonResponse({'error': str(e)}, status=500)
```

## エラーハンドリング

```python
from authlete.exceptions import AuthleteException

def handle_error(e):
    if isinstance(e, AuthleteException):
        print(f"Authleteエラー: {e.result_code} - {e.result_message}")
    else:
        print(f"一般的なエラー: {e}")
```

## 非同期処理

```python
import asyncio
import aiohttp
from authlete.api import AuthleteApi

async def async_authorization():
    async with aiohttp.ClientSession() as session:
        api = AuthleteApi(
            base_url='https://us.authlete.com',
            service_api_key='YOUR_SERVICE_API_KEY',
            service_api_secret='YOUR_SERVICE_API_SECRET',
            session=session
        )
        
        try:
            response = await api.authorization_async({
                'parameters': 'client_id=123&response_type=code'
            })
            print(f"レスポンス: {response}")
        except Exception as e:
            print(f"エラー: {e}")

# 実行
asyncio.run(async_authorization())
```

## 次のステップ

- [TypeScript SDK](/ja/sdk/typescript)を確認
- [Go SDK](/ja/sdk/go)を確認
- [Java SDK](/ja/sdk/java)を確認
- [APIリファレンス](/ja/api-reference)で詳細を確認
