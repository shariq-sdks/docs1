post:
  summary: /api/{serviceId}/auth/token/create/batch API
  description: |
    Start a batch process to create multiple tokens.
  security:
    - AccessToken: []
  parameters:
    - in: path
      name: serviceId
      description: A service ID.
      required: true
      schema:
        type: string
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../model/request/token_create_batch_request.yaml
        example:
          [
            {
              "subject": "john",
              "grantType": "AUTHORIZATION_CODE",
              "clientId": 4284413807,
              "accessToken": "5ce31f34fa9d91fcb7a037c30dda3c2c",
              "refreshToken": "7d627a538f29fcf1645aaa185b4567c7",
              "accessTokenDuration": 3600
            },
            {
              "subject": "john",
              "grantType": "AUTHORIZATION_CODE",
              "clientId": 4284413807,
              "accessToken": "fee98be7aec1ab5c97c1e734be36615d",
              "refreshToken": "1f039e64412a0988097e7a945f712381",
              "accessTokenDuration": 3600
            },
            {
              "subject": "john",
              "grantType": "AUTHORIZATION_CODE",
              "clientId": 4284413807,
              "accessToken": "7fdeff1ddece61c0e7ef59c8ca0236fa",
              "refreshToken": "f6315f15ee41073bd6753d6582e2a076",
              "accessTokenDuration": 3600
            }
          ]
  responses:
    '200':
      description: ""
      content:
        application/json:
          schema:
            $ref: ../model/response/token_create_batch_response.yaml
          example:
            {
              "resultCode": "A482001",
              "resultMessage": "[A482001] Successfully issued a request ID.",
              "requestId": "Z5a40U6dWvw2gMoCOAFbZcM85q4HC0Z--0YKD9-Nf6Q"
            }
    '400':
      $ref: ../model/response/400.yaml
    '401':
      $ref: ../model/response/401.yaml
    '403':
      $ref: ../model/response/403.yaml
    '500':
      $ref: ../model/response/500.yaml
  operationId: 'auth_token_create_batch_api'
  x-code-samples:
    - lang: shell
      label: curl
      source: |
        curl -v -X POST https://beta.authlete.com/api/21653835348762/auth/token/create/batch \
        -H 'Content-Type:application/json' \
        -u 'Authorization: Bearer V5a40R6dWvw2gMkCOBFdZcM95q4HC0Z-T0YKD9-nR6F' \
        -d @tokens.json

    - lang: java
      label: java
      source: |
        AuthleteConfiguration conf = ...;
        AuthleteApi api = AuthleteApiFactory.create(conf);

        TokenCreateRequest req1 = new TokenCreateRequest()
            .setSubject("john")
            .setAccessToken("sample-at1")
            .setRefreshToken("sample-rt1")
            .setGrantType(GrantType.AUTHORIZATION_CODE)
            .setClientId(4284413807L)
            .setAccessTokenDuration(3600)
            ;

        TokenCreateRequest req2 = new TokenCreateRequest()
            .setSubject("john")
            .setAccessToken("sample-at2")
            .setRefreshToken("sample-rt2")
            .setGrantType(GrantType.AUTHORIZATION_CODE)
            .setClientId(4284413807L)
            .setAccessTokenDuration(3600)
            ;
        
        TokenCreateRequest req3 = new TokenCreateRequest()
            .setSubject("john")
            .setAccessToken("sample-at3")
            .setRefreshToken("sample-rt3")
            .setGrantType(GrantType.AUTHORIZATION_CODE)
            .setClientId(4284413807L)
            .setAccessTokenDuration(3600)
            ;

        api.tokenCreateBatch(new TokenCreateRequest[]{ req1, req2, req3 }, false);

  tags:
    - Token Operations
