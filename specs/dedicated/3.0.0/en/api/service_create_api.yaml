post:
  summary: /api/service/create API
  description: |
    Create a new service.
  security:
    - ServiceOwnerCredentials: []
  requestBody:
    required: false
    content:
      application/json:
        schema:
          $ref: ../model/service.yaml
        example:
          serviceName: My service
          issuer: https://my-service.example.com
          clientIdAliasEnabled: true
          supportedGrantTypes:
            - AUTHORIZATION_CODE
            - REFRESH_TOKEN
          supportedResponseTypes:
            - CODE
          authorizationEndpoint: https://my-service.example.com/authz
          pkceRequired: true
          tokenEndpoint: https://my-service.example.com/token
          supportedTokenAuthMethods:
            - CLIENT_SECRET_BASIC
          revocationEndpoint: https://my-service.example.com/revocation
          supportedRevocationAuthMethods:
            - CLIENT_SECRET_BASIC
          introspectionEndpoint: https://my-service.example.com/introspection
          supportedIntrospectionAuthMethods:
            - CLIENT_SECRET_BASIC
          accessTokenType: Bearer
          accessTokenDuration: 3600
          refreshTokenDuration: 3600
          supportedScopes:
            - name: timeline.read
              defaultEntry: false
              description: A permission to read your timeline.
            - name: history.read
              defaultEntry: false
              description: A permission to read your history.
          attributes:
            - key: attribute1-key
              value: attribute1-value
            - key: attribute2-key
              value: attribute2-value
      application/x-www-form-urlencoded:
        schema:
          $ref: ../model/service.yaml
  responses:
    '200':
      description: ""
      content:
        application/json:
          schema:
            $ref: ../model/service.yaml
          example:
            accessTokenDuration: 3600
            accessTokenType: Bearer
            allowableClockSkew: 0
            apiKey: 21653835348762
            apiSecret: uE4NgqeIpuSV_XejQ7Ds3jsgA1yXhjR1MXJ1LbPuyls
            attributes:
              - key: attribute1-key
                value: attribute1-value
              - key: attribute2-key
                value: attribute2-value
            authorizationEndpoint: https://my-service.example.com/authz
            authorizationResponseDuration: 0
            backchannelAuthReqIdDuration: 0
            backchannelBindingMessageRequiredInFapi: false
            backchannelPollingInterval: 0
            backchannelUserCodeParameterSupported: false
            claimShortcutRestrictive: false
            clientIdAliasEnabled: true
            clientsPerDeveloper: 0
            createdAt: 1639373421000
            dcrScopeUsedAsRequestable: false
            deviceFlowCodeDuration: 0
            deviceFlowPollingInterval: 0
            directAuthorizationEndpointEnabled: false
            directIntrospectionEndpointEnabled: false
            directJwksEndpointEnabled: false
            directRevocationEndpointEnabled: false
            directTokenEndpointEnabled: false
            directUserInfoEndpointEnabled: false
            dynamicRegistrationSupported: false
            errorDescriptionOmitted: false
            errorUriOmitted: false
            frontChannelRequestObjectEncryptionRequired: false
            grantManagementActionRequired: false
            hsmEnabled: false
            idTokenDuration: 0
            introspectionEndpoint: https://my-service.example.com/introspection
            issSuppressed: false
            issuer: https://my-service.example.com
            metadata:
              - key: clientCount
                value: '0'
            missingClientIdAllowed: false
            modifiedAt: 1639373421000
            mutualTlsValidatePkiCertChain: false
            nbfOptional: false
            number: 5041
            parRequired: false
            pkceRequired: true
            pkceS256Required: false
            pushedAuthReqDuration: 0
            refreshTokenDuration: 3600
            refreshTokenDurationKept: false
            refreshTokenDurationReset: false
            refreshTokenKept: false
            requestObjectEncryptionAlgMatchRequired: false
            requestObjectEncryptionEncMatchRequired: false
            requestObjectRequired: false
            revocationEndpoint: https://my-service.example.com/revocation
            scopeRequired: false
            serviceName: My service
            serviceOwnerNumber: 2
            singleAccessTokenPerSubject: false
            supportedClaimTypes:
              - NORMAL
            supportedDisplays:
              - PAGE
            supportedGrantTypes:
              - AUTHORIZATION_CODE
              - REFRESH_TOKEN
            supportedIntrospectionAuthMethods:
              - CLIENT_SECRET_BASIC
            supportedResponseTypes:
              - CODE
            supportedRevocationAuthMethods:
              - CLIENT_SECRET_BASIC
            supportedScopes:
              - defaultEntry: false
                description: A permission to read your history.
                name: history.read
              - defaultEntry: false
                description: A permission to read your timeline.
                name: timeline.read
            supportedTokenAuthMethods:
              - CLIENT_SECRET_BASIC
            tlsClientCertificateBoundAccessTokens: false
            tokenEndpoint: https://my-service.example.com/token
            tokenExpirationLinked: false
            traditionalRequestObjectProcessingApplied: false
            unauthorizedOnClientConfigSupported: false
            userCodeLength: 0
    '400':
      $ref: ../model/response/400.yaml
    '401':
      $ref: ../model/response/401.yaml
    '403':
      $ref: ../model/response/403.yaml
    '500':
      $ref: ../model/response/500.yaml
  operationId: 'service_create_api'
  x-code-samples:
    - lang: shell
      label: curl
      source: |
        curl -v -X POST https://api.authlete.com/api/service/create \
        -H 'Content-Type:application/json' \
        -u '9503564192:cxRpzPEkvqYbDu14gpCVKi_p6kMQvcW-lBMi7IfWLK4' \
        -d '{ "serviceName": "My Service", ... }'

    - lang: java
      label: java
      source: |
        AuthleteConfiguration conf = ...;
        AuthleteApi api = AuthleteApiFactory.create(conf);

        Service service = new Service();
        service.setServiceName("My Service");
        ...

        api.createService(service);

    - lang: cs
      label: C#
      source: |
        IAuthleteConfiguration conf = ...;
        IAuthleteApi api = new AuthleteApi(conf);

        Service service = new Service();
        service.ServiceName = "My Service";
        ...

        await api.CreateService(service);

    - lang: php
      label: PHP
      source: |
        $conf = ...;
        $api = new AuthleteApiImpl($conf);

        $service = new Service();
        $service.setServiceName("My Service");
        ...

        $api.createService($service);

    - lang: ruby
      source: |
        conf = ...
        api = Authlete::Api.new(conf)

        service = Authlete::Model::Service.new
        service.service_name = 'My Service'
        ...

        api.service_create(service)

    - lang: python
      source: |
        conf = ...
        api = AuthleteApiImpl(conf)

        service = Service()
        service.serviceName = 'My Service'
        ...

        api.createService(service)

    - lang: go
      source: |
        conf := ...
        api := api.New(&conf)

        service := dto.Service{}
        service.ServiceName = "My Service"
        ...

        api.CreateService(&service)

    - lang: ts
      label: deno
      source: |
        const conf: AuthleteConfiguration = ...;
        const api: AuthleteApi = new AuthleteApiImpl(conf);

        const service = new Service();
        service.serviceName = 'My Service';
        ...

        await api.createService(service);
  tags:
    - Service Management
